- [x] Lingering lifetime issue
- [x] Snapshotting
- [x] Test event loop
- [x] Test promises across snapshots
- [x] Rename jsnap to xs-sandbox
- [x] Clean up unused functions like process_message
- [x] Metering support
- [x] Synchronous response from sendMessage
- [x] Exception from sendMessage
- [x] Undefined from sendMessage
- [x] Location information on exceptions
- [x] Console.log
- [x] Consider reentrancy
- [x] Consider reentrancy and snapshotting (e.g. snapshotting while the stack is active or snapshotting in the job queue).
- [x] Check failure cases like metering expiry or other exception.
- [x] What happens with exceptions in the run loop?
- [x] What happens if the meter runs out before we process the loop?
- [ ] Filenames in stack traces
- [ ] Instrumentation and debugging
- [ ] Test and document behavior of non-deterministic behavior
- [ ] Check memory usage and performance. Maybe try spinning up 1000 instances.
- [ ] Check the TODOs in code
- [ ] Support ESModules

- [ ] Re-enable optimization
- [ ] Re-enable terser
- [ ] Re-enable SINGLE_FILE


